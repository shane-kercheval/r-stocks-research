-   [Preparing Stock Symbol Information](#preparing-stock-symbol-information)
-   [Stock Symbol Datasets](#stock-symbol-datasets)
    -   [All Country World Index (ACWI) Closing Prices](#all-country-world-index-acwi-closing-prices)
-   [Downloading & Cleaning Stock Financial Data via `quantmod`](#downloading-cleaning-stock-financial-data-via-quantmod)
    -   [Check Data Integrity](#check-data-integrity)
    -   ['Cleaning' Stocks](#cleaning-stocks)
    -   [Column Names:](#column-names)
    -   [Creating Trend Dataset](#creating-trend-dataset)
    -   [Data Summary:](#data-summary)
-   [Exploring Data](#exploring-data)
    -   [Collinearity](#collinearity)
    -   [Correlation, Maximal Information Coefficient](#correlation-maximal-information-coefficient)
    -   [Looking at Data](#looking-at-data)
-   [Clustering](#clustering)
-   [Sandbox / TODO](#sandbox-todo)
-   [Datasets](#datasets)

Preparing Stock Symbol Information
==================================

-   stock symbols found at [Nasdaq.com](http://www.nasdaq.com/screening/company-list.aspx)
-   stock information downloaded using [quantmod](https://cran.r-project.org/web/packages/quantmod/quantmod.pdf)

Stock Symbol Datasets
=====================

These stock symbols will be used to download the financials using `quantmod`.

``` r
head(df_nasdaq_symbols)
```

    ## # A tibble: 6 × 2
    ##                                     name symbol
    ##                                    <chr>  <chr>
    ## 1                1-800 FLOWERS.COM, Inc.   FLWS
    ## 2 1347 Property Insurance Holdings, Inc.    PIH
    ## 3          1st Constitution Bancorp (NJ)   FCCY
    ## 4                 1st Source Corporation   SRCE
    ## 5                   21Vianet Group, Inc.   VNET
    ## 6                               2U, Inc.   TWOU

``` r
head(df_nyse_symbols)
```

    ##   symbol                   Name LastSale MarketCap IPOyear            Sector                                        industry                     Summary.Quote
    ## 1    DDD 3D Systems Corporation    13.28    $1.49B     n/a        Technology         Computer Software: Prepackaged Software  http://www.nasdaq.com/symbol/ddd
    ## 2    MMM             3M Company   172.63  $103.83B     n/a       Health Care                      Medical/Dental Instruments  http://www.nasdaq.com/symbol/mmm
    ## 3   WBAI        500.com Limited     13.4  $556.07M    2013 Consumer Services           Services-Misc. Amusement & Recreation http://www.nasdaq.com/symbol/wbai
    ## 4   WUBA            58.com Inc.    30.38     $4.4B    2013        Technology Computer Software: Programming, Data Processing http://www.nasdaq.com/symbol/wuba
    ## 5    AHC  A.H. Belo Corporation     6.15  $133.31M     n/a Consumer Services                            Newspapers/Magazines  http://www.nasdaq.com/symbol/ahc
    ## 6   ATEN     A10 Networks, Inc.     7.93  $532.94M    2014        Technology               Computer Communications Equipment http://www.nasdaq.com/symbol/aten

``` r
head(df_amex_symbols)
```

    ##           symbol                                                           Name LastSale MarketCap IPOyear                Sector              industry
    ## 1           XXII                                        22nd Century Group, Inc    0.935    $84.8M     n/a Consumer Non-Durables Farming/Seeds/Milling
    ## 2            FAX                          Aberdeen Asia-Pacific Income Fund Inc     4.71    $1.21B    1986                   n/a                   n/a
    ## 3            IAF                             Aberdeen Australia Equity Fund Inc     5.78   $131.6M     n/a                   n/a                   n/a
    ## 4             CH                                      Aberdeen Chile Fund, Inc.     6.16   $57.82M     n/a                   n/a                   n/a
    ## 5 ABE            Aberdeen Emerging Markets Smaller Company Opportunities Fund I  11.2686  $109.06M     n/a                   n/a                   n/a
    ## 6            FCO                              Aberdeen Global Income Fund, Inc.     7.86   $68.89M    1992                   n/a                   n/a
    ##                       Summary.Quote
    ## 1 http://www.nasdaq.com/symbol/xxii
    ## 2  http://www.nasdaq.com/symbol/fax
    ## 3  http://www.nasdaq.com/symbol/iaf
    ## 4   http://www.nasdaq.com/symbol/ch
    ## 5  http://www.nasdaq.com/symbol/abe
    ## 6  http://www.nasdaq.com/symbol/fco

All Country World Index (ACWI) Closing Prices
---------------------------------------------

We will use the `All Country World Index` (`ACWI`) [closing prices](https://finance.yahoo.com/quote/ACWI?p=ACWI) to compare our stocks against (and trying to beat) with machine learning predictions. That is, we want to be able to select stocks that will outperform the market (i.e. `ACWI`) after 1 year from the release of the financial data.

According to [Investipedia](http://www.investopedia.com/terms/m/msci-acwi.asp), the ACWI is:

> a market capitalization weighted index designed to provide a broad measure of equity-market performance throughout the world. The MSCI ACWI is maintained by Morgan Stanley Capital International, and is comprised of stocks from both developed and emerging markets.

``` r
head(acwi_closing)
```

    ## # A tibble: 6 × 6
    ##         date close close_lag_year close_moving_ave close_lag_year_moving_ave perc_change_1year
    ##       <date> <dbl>          <dbl>            <dbl>                     <dbl>             <dbl>
    ## 1 2017-04-18 62.77             NA          63.0280                        NA                NA
    ## 2 2017-04-17 63.08             NA          63.0252                        NA                NA
    ## 3 2017-04-16 62.59             NA          63.0152                        NA                NA
    ## 4 2017-04-15 62.59             NA          63.0150                        NA                NA
    ## 5 2017-04-14 62.59             NA          63.0148                        NA                NA
    ## 6 2017-04-13 62.59             NA          63.0178                        NA                NA

``` r
tail(acwi_closing)
```

    ## # A tibble: 6 × 6
    ##         date    close close_lag_year close_moving_ave close_lag_year_moving_ave perc_change_1year
    ##       <date>    <dbl>          <dbl>            <dbl>                     <dbl>             <dbl>
    ## 1 2008-04-02 43.19398       25.43898               NA                        NA                NA
    ## 2 2008-04-01 42.72163       24.46056               NA                        NA                NA
    ## 3 2008-03-31 41.59982       23.89544               NA                        NA                NA
    ## 4 2008-03-30 42.25773       23.44840               NA                        NA                NA
    ## 5 2008-03-29 42.25773       24.37621               NA                        NA                NA
    ## 6 2008-03-28 42.25773       24.37621               NA                        NA                NA

Downloading & Cleaning Stock Financial Data via `quantmod`
==========================================================

-   downloads stock financials statements using `quantmod` library, saves them into partitions that contain up to 100 stocks per partition (some stocks will not be found)
-   converts format of data returned by `quantmod` from various lists of financial statements to a single dataframes
-   changes column names into valid and consistent values (e.g. removes punctuation)
-   calculates various fields financial ratios and formats data so that rows (i.e. years) have that year's data as well as specific information for the following year in order to use those fields as target variables to be predicted (such as net profit margin, next year's stock prices, etc.)
    -   removes stocks that are missing a certain threshold of information.

Check Data Integrity
--------------------

'Cleaning' Stocks
-----------------

Removing variables that have mostly a) missing variables, b) variables that are very unlikely to contribute to model and more likely to create noise, and c) are duplicated and/or very highly correlated to other variables:

> Revenue, OtherRevenueTotal, DepreciationAmortization, InterestExpenseIncomeNetOperating, OtherOperatingExpensesTotal, InterestIncomeExpenseNetNonOperating, GainLossonSaleofAssets, OtherNet, MinorityInterestx, EquityInAffiliates, AccountingChange, DiscontinuedOperations, ExtraordinaryItem, PreferredDividends, BasicWeightedAverageShares, BasicEPSExcludingExtraordinaryItems, BasicEPSIncludingExtraordinaryItems, DilutionAdjustment, DilutedEPSIncludingExtraordinaryItems, GrossDividendsCommonStock, NetIncomeafterStockBasedCompExpense, BasicEPSafterStockBasedCompExpense, DilutedEPSafterStockBasedCompExpense, DepreciationSupplemental, TotalSpecialItems, NormalizedIncomeBeforeTaxes, EffectofSpecialItemsonIncomeTaxes, IncomeTaxesExImpactofSpecialItems, NormalizedIncomeAfterTaxes, NormalizedIncomeAvailtoCommon, BasicNormalizedEPS, ShortTermInvestments, ReceivablesOther, LongTermInvestments, CurrentPortofLTDebtCapitalLeases, CapitalLeaseObligations, DeferredIncomeTax, MinorityInteresty, TreasuryStockCommon, OtherEquityTotal, SharesOutsCommonStockPrimaryIssue, Amortization, IssuanceRetirementofStockNet, IssuanceRetirementofDebtNet, ForeignExchangeEffects

Removing `340` symbols (out of `3069`, or 11.1%) that have &gt;= 12.5% of variables (i.e. financial data) with `NA` values.

Removing `1498` symbols (out of `2729`, or 54.9%) that have 'odd' data and/or stocks that I'm not likely to invest in anyway (e.g. less than $5 historical median stock price)

Removing variables that have mostly have &gt;= 20% data missing:

> UnusualExpenseIncome, PrepaidExpenses, RedeemablePreferredStockTotal, PreferredStockNonRedeemableNet, TotalCashDividendsPaid

> Using KNN Imputation to fill missing values for remaining data.

> `1231` unique stocks.

Column Names:
-------------

``` r
column_names <- colnames(df_stocks_full)
kable(data_frame(num=(1:length(column_names)), colname_names=column_names))
```

|  num| colname\_names                              |
|----:|:--------------------------------------------|
|    1| date                                        |
|    2| symbol                                      |
|    3| perc\_change\_stock\_1year                  |
|    4| diff\_above\_index\_1year                   |
|    5| TotalRevenue                                |
|    6| CostofRevenueTotal                          |
|    7| GrossProfit                                 |
|    8| SellingGeneralAdminExpensesTotal            |
|    9| ResearchDevelopment                         |
|   10| TotalOperatingExpense                       |
|   11| OperatingIncome                             |
|   12| IncomeBeforeTax                             |
|   13| IncomeAfterTax                              |
|   14| NetIncomeBeforeExtraItems                   |
|   15| NetIncome                                   |
|   16| IncomeAvailabletoCommonExclExtraItems       |
|   17| IncomeAvailabletoCommonInclExtraItems       |
|   18| DilutedWeightedAverageShares                |
|   19| DilutedEPSExcludingExtraordinaryItems       |
|   20| DividendsperShareCommonStockPrimaryIssue    |
|   21| DilutedNormalizedEPS                        |
|   22| CashEquivalents                             |
|   23| CashandShortTermInvestments                 |
|   24| AccountsReceivableTradeNet                  |
|   25| TotalReceivablesNet                         |
|   26| TotalInventory                              |
|   27| OtherCurrentAssetsTotal                     |
|   28| TotalCurrentAssets                          |
|   29| PropertyPlantEquipmentTotalGross            |
|   30| AccumulatedDepreciationTotal                |
|   31| GoodwillNet                                 |
|   32| IntangiblesNet                              |
|   33| OtherLongTermAssetsTotal                    |
|   34| TotalAssets                                 |
|   35| AccountsPayable                             |
|   36| AccruedExpenses                             |
|   37| NotesPayableShortTermDebt                   |
|   38| OtherCurrentliabilitiesTotal                |
|   39| TotalCurrentLiabilities                     |
|   40| LongTermDebt                                |
|   41| TotalLongTermDebt                           |
|   42| TotalDebt                                   |
|   43| OtherLiabilitiesTotal                       |
|   44| TotalLiabilities                            |
|   45| CommonStockTotal                            |
|   46| AdditionalPaidInCapital                     |
|   47| RetainedEarningsAccumulatedDeficit          |
|   48| TotalEquity                                 |
|   49| TotalLiabilitiesShareholders39Equity        |
|   50| TotalCommonSharesOutstanding                |
|   51| NetIncomeStartingLine                       |
|   52| DepreciationDepletion                       |
|   53| DeferredTaxes                               |
|   54| NonCashItems                                |
|   55| ChangesinWorkingCapital                     |
|   56| CashfromOperatingActivities                 |
|   57| CapitalExpenditures                         |
|   58| OtherInvestingCashFlowItemsTotal            |
|   59| CashfromInvestingActivities                 |
|   60| FinancingCashFlowItems                      |
|   61| CashfromFinancingActivities                 |
|   62| NetChangeinCash                             |
|   63| CashInterestPaidSupplemental                |
|   64| CashTaxesPaidSupplemental                   |
|   65| net\_profit\_margin                         |
|   66| cs\_current\_assets                         |
|   67| cs\_cash\_short\_term\_investments          |
|   68| cs\_accounts\_receivable                    |
|   69| cs\_inventories                             |
|   70| cs\_goodwill                                |
|   71| cs\_current\_liabilities                    |
|   72| cs\_accounts\_payable                       |
|   73| cs\_long\_term\_debt                        |
|   74| cs\_total\_liabilities\_debt                |
|   75| cs\_cost\_of\_goods\_sold                   |
|   76| cs\_gross\_profit                           |
|   77| cs\_rd                                      |
|   78| cs\_income\_from\_operations                |
|   79| cs\_net\_income                             |
|   80| cs\_shareholders\_equity                    |
|   81| cs\_cash\_flow\_from\_operatons             |
|   82| cs\_capital\_expenditures                   |
|   83| ratios\_current\_ratio                      |
|   84| ratios\_quick\_ratio                        |
|   85| ratios\_cash\_ratio                         |
|   86| ratios\_debt\_to\_total\_assets             |
|   87| ratios\_long\_term\_debt\_to\_total\_assets |
|   88| ratios\_cash\_flow\_to\_total\_debt         |
|   89| ratios\_debt\_to\_equity                    |
|   90| ratios\_equity\_multiplier                  |
|   91| ratios\_intangible\_assets                  |
|   92| ratios\_rd\_as\_perc\_revenue               |
|   93| ratios\_gross\_profit\_margin               |
|   94| ratios\_operating\_profit\_margin           |
|   95| ratios\_net\_profit\_margin                 |
|   96| ratios\_income\_to\_assets                  |
|   97| ratios\_income\_to\_equity                  |
|   98| ratioh\_current\_ratio                      |
|   99| ratioh\_quick\_ratio                        |
|  100| ratioh\_cash\_ratio                         |
|  101| ratioh\_debt\_to\_equity                    |
|  102| ratioh\_intangible\_asset\_ratio            |
|  103| ratioh\_gross\_profit\_margin               |
|  104| ratioh\_net\_profit\_margin                 |
|  105| ratioh\_income\_to\_equity                  |

Creating Trend Dataset
----------------------

``` r
if(pull_data)
{
    df_stocks_trend <- build_stock_trend_dataset(df_stocks_full = df_stocks_full)

    saveRDS(df_stocks_trend, './data/df_stocks_trend.RDS')
}else
{
    df_stocks_trend <- readRDS('./data/df_stocks_trend.RDS')
}
```

Data Summary:
-------------

> **NOTE**: all numbers, regardless of source (yahoo/google), look to be in `millions`. I have confirmed over multiple stocks/sources (but this can/should be further confirmed).

``` r
summary(df_stocks_full)
```

          date               symbol          perc_change_stock_1year diff_above_index_1year  TotalRevenue      CostofRevenueTotal  GrossProfit        SellingGeneralAdminExpensesTotal
     Min.   :2010-09-30   Length:4328        Min.   :-0.79865        Min.   :-0.81812       Min.   :   100.5   Min.   :     1.1   Min.   :    15.72   Min.   :     3.29               
     1st Qu.:2013-09-30   Class :character   1st Qu.:-0.05028        1st Qu.:-0.10321       1st Qu.:   701.2   1st Qu.:   366.5   1st Qu.:   269.87   1st Qu.:   121.74               
     Median :2014-06-30   Mode  :character   Median : 0.13153        Median : 0.05420       Median :  2144.9   Median :  1165.7   Median :   784.58   Median :   345.83               
     Mean   :2014-07-06                      Mean   : 0.16080        Mean   : 0.08457       Mean   : 11858.4   Mean   :  7131.2   Mean   :  4774.32   Mean   :  2086.52               
     3rd Qu.:2015-04-24                      3rd Qu.: 0.32600        3rd Qu.: 0.23512       3rd Qu.:  6962.8   3rd Qu.:  4270.1   3rd Qu.:  2453.08   3rd Qu.:  1112.29               
     Max.   :2016-01-03                      Max.   : 2.90047        Max.   : 2.67366       Max.   :485651.0   Max.   :365086.0   Max.   :291370.00   Max.   :151531.00               
     ResearchDevelopment TotalOperatingExpense OperatingIncome     IncomeBeforeTax     IncomeAfterTax     NetIncomeBeforeExtraItems   NetIncome       
     Min.   :    0.00    Min.   :    71.0      Min.   :-30613.00   Min.   :-28695.00   Min.   :-4659.73   Min.   :-4946.9           Min.   :    0.04  
     1st Qu.:    0.00    1st Qu.:   594.3      1st Qu.:    71.58   1st Qu.:    62.96   1st Qu.:   43.74   1st Qu.:   43.2           1st Qu.:   43.86  
     Median :    0.00    Median :  1829.7      Median :   237.55   Median :   200.21   Median :  144.10   Median :  139.7           Median :  141.55  
     Mean   :  270.13    Mean   : 10231.9      Mean   :  1626.43   Mean   :  1555.27   Mean   : 1155.66   Mean   : 1125.4           Mean   : 1151.41  
     3rd Qu.:   31.11    3rd Qu.:  6084.8      3rd Qu.:   831.45   3rd Qu.:   723.50   3rd Qu.:  516.52   3rd Qu.:  505.5           3rd Qu.:  512.96  
     Max.   :36004.00    Max.   :458504.0      Max.   :105702.00   Max.   :111683.00   Max.   :87059.00   Max.   :86528.0           Max.   :86528.00  
     IncomeAvailabletoCommonExclExtraItems IncomeAvailabletoCommonInclExtraItems DilutedWeightedAverageShares DilutedEPSExcludingExtraordinaryItems
     Min.   :-4946.91                      Min.   : -266.00                      Min.   :     0.7             Min.   : -6.290                      
     1st Qu.:   42.15                      1st Qu.:   42.84                      1st Qu.:    34.3             1st Qu.:  0.930                      
     Median :  136.47                      Median :  137.68                      Median :    72.4             Median :  1.750                      
     Mean   : 1118.94                      Mean   : 1145.00                      Mean   :   830.1             Mean   :  3.027                      
     3rd Qu.:  498.39                      3rd Qu.:  507.22                      3rd Qu.:   226.0             3rd Qu.:  3.000                      
     Max.   :86528.00                      Max.   :86528.00                      Max.   :362429.9             Max.   :299.820                      
     DividendsperShareCommonStockPrimaryIssue DilutedNormalizedEPS CashEquivalents     CashandShortTermInvestments AccountsReceivableTradeNet TotalReceivablesNet TotalInventory    
     Min.   :  0.0000                         Min.   : -6.210      Min.   :     0.00   Min.   :     0.00           Min.   :    -0.08          Min.   :     0.00   Min.   :    0.00  
     1st Qu.:  0.0000                         1st Qu.:  1.008      1st Qu.:    53.62   1st Qu.:    58.28           1st Qu.:    76.19          1st Qu.:    82.16   1st Qu.:   76.04  
     Median :  0.4800                         Median :  1.850      Median :   167.75   Median :   197.75           Median :   234.87          Median :   251.22   Median :  213.25  
     Mean   :  0.9738                         Mean   :  3.201      Mean   :  1081.88   Mean   :  1999.31           Mean   :  1406.95          Mean   :  1645.92   Mean   :  942.35  
     3rd Qu.:  1.0705                         3rd Qu.:  3.210      3rd Qu.:   574.53   3rd Qu.:   734.79           3rd Qu.:   795.64          3rd Qu.:   922.74   3rd Qu.:  621.12  
     Max.   :131.0000                         Max.   :301.350      Max.   :111742.00   Max.   :254509.00           Max.   :139159.00          Max.   :150923.00   Max.   :47257.00  
     OtherCurrentAssetsTotal TotalCurrentAssets PropertyPlantEquipmentTotalGross AccumulatedDepreciationTotal  GoodwillNet       IntangiblesNet      OtherLongTermAssetsTotal
     Min.   :    0.00        Min.   :    10.1   Min.   :      0.0                Min.   :-630190.7            Min.   :     0.0   Min.   :    -0.07   Min.   :    0.00        
     1st Qu.:   13.00        1st Qu.:   300.7   1st Qu.:    262.2                1st Qu.:  -1401.8            1st Qu.:    95.5   1st Qu.:    42.92   1st Qu.:   17.01        
     Median :   44.71        Median :   815.9   Median :    854.4                Median :   -409.0            Median :   389.1   Median :   174.63   Median :   65.52        
     Mean   :  469.56        Mean   :  5073.7   Mean   :  10609.1                Mean   :  -5414.2            Mean   :  2433.3   Mean   :  1755.57   Mean   :  806.67        
     3rd Qu.:  174.31        3rd Qu.:  2728.3   3rd Qu.:   2911.9                3rd Qu.:   -133.0            3rd Qu.:  1527.2   3rd Qu.:   619.02   3rd Qu.:  340.51        
     Max.   :79228.00        Max.   :436492.0   Max.   :1015426.0                Max.   :     -0.1            Max.   :104568.0   Max.   :120710.00   Max.   :47923.00        
      TotalAssets       AccountsPayable     AccruedExpenses    NotesPayableShortTermDebt OtherCurrentliabilitiesTotal TotalCurrentLiabilities  LongTermDebt      TotalLongTermDebt  
     Min.   :    36.0   Min.   :     0.00   Min.   :-1284.00   Min.   :    0.0           Min.   :   -4.00             Min.   :     7.21       Min.   :     0.0   Min.   :     0.00  
     1st Qu.:   766.5   1st Qu.:    33.18   1st Qu.:   39.26   1st Qu.:    0.0           1st Qu.:   18.62             1st Qu.:   132.53       1st Qu.:   219.5   1st Qu.:    29.57  
     Median :  2486.5   Median :   118.79   Median :  114.05   Median :    0.0           Median :   70.91             Median :   416.73       Median :   596.7   Median :   490.63  
     Mean   : 16747.3   Mean   :  1166.82   Mean   :  787.89   Mean   :  324.8           Mean   : 1063.21             Mean   :  3793.26       Mean   :  3679.4   Mean   :  3654.49  
     3rd Qu.:  9030.7   3rd Qu.:   458.46   3rd Qu.:  413.86   3rd Qu.:    0.0           3rd Qu.:  369.42             3rd Qu.:  1791.00       3rd Qu.:  2074.1   3rd Qu.:  2060.85  
     Max.   :664362.0   Max.   :122647.00   Max.   :74256.00   Max.   :69231.2           Max.   :63809.00             Max.   :255929.00       Max.   :292844.0   Max.   :292844.00  
       TotalDebt        OtherLiabilitiesTotal TotalLiabilities   CommonStockTotal   AdditionalPaidInCapital RetainedEarningsAccumulatedDeficit  TotalEquity      
     Min.   :     0.0   Min.   :  -48.32      Min.   :   -65.9   Min.   :    0.00   Min.   :  -884.6        Min.   :-104557.2                  Min.   :     2.0  
     1st Qu.:    51.5   1st Qu.:   26.94      1st Qu.:   323.9   1st Qu.:    0.36   1st Qu.:   170.0        1st Qu.:    136.1                  1st Qu.:   373.9  
     Median :   565.4   Median :  119.64      Median :  1335.7   Median :    2.00   Median :   457.9        Median :    588.6                  Median :  1015.0  
     Mean   :  4460.0   Mean   : 1279.02      Mean   :  9739.5   Mean   : 1031.68   Mean   :  3101.5        Mean   :   5231.5                  Mean   :  7007.8  
     3rd Qu.:  2358.8   3rd Qu.:  567.00      3rd Qu.:  5420.3   3rd Qu.:  105.25   3rd Qu.:  1428.9        3rd Qu.:   2214.7                  3rd Qu.:  3396.1  
     Max.   :356323.0   Max.   :56520.00      Max.   :493263.0   Max.   :80932.00   Max.   :184620.1        Max.   : 412444.0                  Max.   :407982.0  
     TotalLiabilitiesShareholders39Equity TotalCommonSharesOutstanding NetIncomeStartingLine DepreciationDepletion DeferredTaxes       NonCashItems       ChangesinWorkingCapital
     Min.   :    36.0                     Min.   :     0.6             Min.   : -580.27      Min.   :    0.31      Min.   :-7991.00   Min.   :-66163.64   Min.   :-32630.00      
     1st Qu.:   766.5                     1st Qu.:    34.0             1st Qu.:   44.81      1st Qu.:   22.92      1st Qu.:   -6.81   1st Qu.:     1.96   1st Qu.:   -64.83      
     Median :  2486.5                     Median :    72.0             Median :  147.72      Median :   74.27      Median :    0.99   Median :    13.39   Median :   -10.29      
     Mean   : 16747.3                     Mean   :   805.8             Mean   : 1240.73      Mean   :  772.33      Mean   :   37.39   Mean   :   181.54   Mean   :  -246.51      
     3rd Qu.:  9030.7                     3rd Qu.:   221.2             3rd Qu.:  530.12      3rd Qu.:  264.91      3rd Qu.:   14.84   3rd Qu.:    62.16   3rd Qu.:    10.81      
     Max.   :664362.0                     Max.   :338468.3             Max.   :90172.00      Max.   :82473.00      Max.   : 9671.00   Max.   : 42813.00   Max.   : 11647.00      
     CashfromOperatingActivities CapitalExpenditures  OtherInvestingCashFlowItemsTotal CashfromInvestingActivities FinancingCashFlowItems CashfromFinancingActivities
     Min.   : -2201.06           Min.   :-102022.00   Min.   :-83315.00                Min.   :-170032.00          Min.   :-62759.00      Min.   :-75346.00          
     1st Qu.:    79.37           1st Qu.:   -359.65   1st Qu.:  -152.61                1st Qu.:   -596.10          1st Qu.:   -12.53      1st Qu.:  -252.10          
     Median :   251.10           Median :    -94.97   Median :   -14.45                Median :   -157.20          Median :    -0.34      Median :   -36.34          
     Mean   :  2053.42           Mean   :  -1123.94   Mean   :  -350.96                Mean   :  -1473.82          Mean   :   -68.80      Mean   :  -474.11          
     3rd Qu.:   891.83           3rd Qu.:    -27.68   3rd Qu.:     3.56                3rd Qu.:    -38.93          3rd Qu.:     3.64      3rd Qu.:    15.94          
     Max.   :159377.00           Max.   :     -0.04   Max.   : 44097.33                Max.   :  36184.38          Max.   : 16566.28      Max.   : 87497.00          
     NetChangeinCash     CashInterestPaidSupplemental CashTaxesPaidSupplemental net_profit_margin   cs_current_assets cs_cash_short_term_investments cs_accounts_receivable
     Min.   :-42930.00   Min.   :-2952.00             Min.   :-13647.00         Min.   :0.0002318   Min.   :0.01544   Min.   :0.00000                Min.   :0.00000       
     1st Qu.:   -29.59   1st Qu.:    3.88             1st Qu.:    11.95         1st Qu.:0.0406755   1st Qu.:0.22959   1st Qu.:0.03272                1st Qu.:0.05613       
     Median :     3.63   Median :   23.34             Median :    41.40         Median :0.0736982   Median :0.41108   Median :0.09323                Median :0.11045       
     Mean   :    95.28   Mean   :  173.93             Mean   :   363.73         Mean   :0.0956484   Mean   :0.41323   Mean   :0.14530                Mean   :0.13199       
     3rd Qu.:    58.92   3rd Qu.:   96.27             3rd Qu.:   158.00         3rd Qu.:0.1237887   3rd Qu.:0.57969   3rd Qu.:0.21061                3rd Qu.:0.17597       
     Max.   : 75148.00   Max.   :24957.00             Max.   : 32648.00         Max.   :1.5452460   Max.   :0.97810   Max.   :0.85475                Max.   :1.34156       
     cs_inventories     cs_goodwill      cs_current_liabilities cs_accounts_payable cs_long_term_debt cs_total_liabilities_debt cs_cost_of_goods_sold cs_gross_profit   
     Min.   :0.00000   Min.   :0.00000   Min.   :0.007781       Min.   :0.00000     Min.   : 0.0000   Min.   :-0.1717           Min.   :0.00289       Min.   :0.004036  
     1st Qu.:0.03696   1st Qu.:0.06691   1st Qu.:0.123666       1st Qu.:0.02468     1st Qu.: 0.1372   1st Qu.: 0.3833           1st Qu.:0.42625       1st Qu.:0.254546  
     Median :0.09555   Median :0.15192   Median :0.185615       Median :0.04968     Median : 0.2508   Median : 0.5345           Median :0.62043       Median :0.388283  
     Mean   :0.13835   Mean   :0.24578   Mean   :0.212364       Mean   :0.07546     Mean   : 0.3519   Mean   : 0.5246           Mean   :0.61132       Mean   :0.447937  
     3rd Qu.:0.18366   3rd Qu.:0.29860   3rd Qu.:0.270541       3rd Qu.:0.09573     3rd Qu.: 0.3858   3rd Qu.: 0.6708           3rd Qu.:0.75671       3rd Qu.:0.586267  
     Max.   :2.26750   Max.   :8.91783   Max.   :0.896142       Max.   :1.41142     Max.   :12.7293   Max.   : 0.9979           Max.   :8.46721       Max.   :7.136214  
         cs_rd         cs_income_from_operations cs_net_income       cs_shareholders_equity cs_cash_flow_from_operatons cs_capital_expenditures ratios_current_ratio ratios_quick_ratio
     Min.   :0.00000   Min.   :-0.20106          Min.   :0.0002318   Min.   :0.002122       Min.   :-0.45393            Min.   :-4.979452       Min.   : 0.136       Min.   : 0.03017  
     1st Qu.:0.00000   1st Qu.: 0.06876          1st Qu.:0.0406755   1st Qu.:0.329180       1st Qu.: 0.07837            1st Qu.:-0.082258       1st Qu.: 1.249       1st Qu.: 0.75550  
     Median :0.00000   Median : 0.11740          Median :0.0736982   Median :0.465544       Median : 0.13169            Median :-0.041856       Median : 1.857       Median : 1.18402  
     Mean   :0.02869   Mean   : 0.14224          Mean   :0.0956484   Mean   :0.475367       Mean   : 0.16079            Mean   :-0.089655       Mean   : 2.315       Mean   : 1.60165  
     3rd Qu.:0.02446   3rd Qu.: 0.18727          3rd Qu.:0.1237887   3rd Qu.:0.616699       3rd Qu.: 0.21916            3rd Qu.:-0.022826       3rd Qu.: 2.810       3rd Qu.: 1.87571  
     Max.   :0.45380   Max.   : 0.67995          Max.   :1.5452460   Max.   :1.171682       Max.   : 1.17776            Max.   :-0.000169       Max.   :32.710       Max.   :32.36178  
     ratios_cash_ratio ratios_debt_to_total_assets ratios_long_term_debt_to_total_assets ratios_cash_flow_to_total_debt ratios_debt_to_equity ratios_equity_multiplier
     Min.   : 0.0000   Min.   :-0.1717             Min.   : 0.0000                       Min.   :-1.1320                Min.   : -0.1465      Min.   :  0.8535        
     1st Qu.: 0.1764   1st Qu.: 0.3833             1st Qu.: 0.1372                       1st Qu.: 0.1263                1st Qu.:  0.6215      1st Qu.:  1.6215        
     Median : 0.4676   Median : 0.5345             Median : 0.2508                       Median : 0.2026                Median :  1.1480      Median :  2.1480        
     Mean   : 0.9078   Mean   : 0.5246             Mean   : 0.3519                       Mean   : 0.2997                Mean   :  2.2149      Mean   :  3.2149        
     3rd Qu.: 1.0691   3rd Qu.: 0.6708             3rd Qu.: 0.3858                       3rd Qu.: 0.3510                3rd Qu.:  2.0378      3rd Qu.:  3.0378        
     Max.   :29.7497   Max.   : 0.9979             Max.   :12.7293                       Max.   : 4.3181                Max.   :470.3754      Max.   :471.3754        
     ratios_intangible_assets ratios_rd_as_perc_revenue ratios_gross_profit_margin ratios_operating_profit_margin ratios_net_profit_margin ratios_income_to_assets
     Min.   :-0.000233        Min.   :0.00000           Min.   :0.004036           Min.   :-0.20106               Min.   :0.0002318        Min.   :0.0001696      
     1st Qu.: 0.025234        1st Qu.:0.00000           1st Qu.:0.254546           1st Qu.: 0.06876               1st Qu.:0.0406755        1st Qu.:0.0368707      
     Median : 0.067868        Median :0.00000           Median :0.388283           Median : 0.11740               Median :0.0736982        Median :0.0614357      
     Mean   : 0.123541        Mean   :0.02869           Mean   :0.447937           Mean   : 0.14224               Mean   :0.0956484        Mean   :0.0735010      
     3rd Qu.: 0.153714        3rd Qu.:0.02446           3rd Qu.:0.586267           3rd Qu.: 0.18727               3rd Qu.:0.1237887        3rd Qu.:0.0949126      
     Max.   : 4.888661        Max.   :0.45380           Max.   :7.136214           Max.   : 0.67995               Max.   :1.5452460        Max.   :0.5328101      
     ratios_income_to_equity ratioh_current_ratio ratioh_quick_ratio ratioh_cash_ratio ratioh_debt_to_equity ratioh_intangible_asset_ratio ratioh_gross_profit_margin
     Min.   : 0.000343       Mode :logical        Mode :logical      Mode :logical     Mode :logical         Mode :logical                 Mode :logical             
     1st Qu.: 0.087072       FALSE:1192           FALSE:1711         FALSE:2731        FALSE:3532            FALSE:711                     FALSE:1438                
     Median : 0.135116       TRUE :3136           TRUE :2617         TRUE :1597        TRUE :796             TRUE :3617                    TRUE :2890                
     Mean   : 0.206155       NA's :0              NA's :0            NA's :0           NA's :0               NA's :0                       NA's :0                   
     3rd Qu.: 0.209428                                                                                                                                               
     Max.   :24.500000                                                                                                                                               
     ratioh_net_profit_margin ratioh_income_to_equity
     Mode :logical            Mode :logical          
     FALSE:3567               FALSE:2439             
     TRUE :761                TRUE :1889             
     NA's :0                  NA's :0                
                                                     
                                                     

``` r
cat('\n\n')
```

``` r
summary(df_stocks_trend)
```

          date               symbol          perc_change_stock_1year diff_above_index_1year  TotalRevenue      trend_CostofRevenueTotal trend_GrossProfit 
     Min.   :2013-09-30   Length:1155        Min.   :-0.75358        Min.   :-0.81812       Min.   :   102.9   Min.   :-0.85111         Min.   :-0.47927  
     1st Qu.:2015-09-30   Class :character   1st Qu.:-0.07187        1st Qu.:-0.10247       1st Qu.:   803.6   1st Qu.:-0.02598         1st Qu.: 0.00248  
     Median :2015-12-31   Mode  :character   Median : 0.09335        Median : 0.05246       Median :  2306.9   Median : 0.04190         Median : 0.06069  
     Mean   :2015-10-25                      Mean   : 0.10423        Mean   : 0.06753       Mean   : 12100.9   Mean   : 0.05519         Mean   : 0.08434  
     3rd Qu.:2015-12-31                      3rd Qu.: 0.26613        3rd Qu.: 0.21838       3rd Qu.:  7505.7   3rd Qu.: 0.11851         3rd Qu.: 0.14021  
     Max.   :2016-01-03                      Max.   : 2.64822        Max.   : 2.58368       Max.   :485651.0   Max.   : 1.43426         Max.   : 5.54559  
     trend_SellingGeneralAdminExpensesTotal trend_TotalOperatingExpense trend_OperatingIncome trend_IncomeBeforeTax trend_IncomeAfterTax trend_NetIncomeBeforeExtraItems
     Min.   :-0.456781                      Min.   :-0.570698           Min.   :-4.75493      Min.   :-10.20455     Min.   :-130.51910   Min.   :-81.63741              
     1st Qu.:-0.001264                      1st Qu.:-0.008949           1st Qu.:-0.06091      1st Qu.: -0.07989     1st Qu.:  -0.08193   1st Qu.: -0.07953              
     Median : 0.056319                      Median : 0.045254           Median : 0.08265      Median :  0.08274     Median :   0.07520   Median :  0.07503              
     Mean   : 0.089398                      Mean   : 0.064419           Mean   : 0.20027      Mean   :  0.32075     Mean   :   0.34805   Mean   :  0.37813              
     3rd Qu.: 0.134208                      3rd Qu.: 0.116590           3rd Qu.: 0.23133      3rd Qu.:  0.25065     3rd Qu.:   0.24791   3rd Qu.:  0.25842              
     Max.   : 4.464132                      Max.   : 1.549270           Max.   :25.77269      Max.   : 91.51511     Max.   :  75.58699   Max.   : 75.58699              
     trend_NetIncome    trend_IncomeAvailabletoCommonExclExtraItems trend_IncomeAvailabletoCommonInclExtraItems trend_DilutedWeightedAverageShares trend_AccountsReceivableTradeNet
     Min.   :-0.77475   Min.   :-81.63741                           Min.   :-13.79427                           Min.   :-0.1782814                 Min.   :-1.24773                
     1st Qu.:-0.07078   1st Qu.: -0.08401                           1st Qu.: -0.07680                           1st Qu.:-0.0216624                 1st Qu.:-0.03981                
     Median : 0.08264   Median :  0.07175                           Median :  0.07974                           Median :-0.0007785                 Median : 0.04179                
     Mean   : 0.53072   Mean   :  0.32138                           Mean   :  0.48777                           Mean   : 0.0042787                 Mean   : 0.09316                
     3rd Qu.: 0.27811   3rd Qu.:  0.25524                           3rd Qu.:  0.27598                           3rd Qu.: 0.0096950                 3rd Qu.: 0.14359                
     Max.   :75.58699   Max.   : 75.58699                           Max.   : 75.58699                           Max.   : 0.7237760                 Max.   :16.74313                
     trend_TotalReceivablesNet trend_TotalCurrentAssets trend_PropertyPlantEquipmentTotalGross trend_AccumulatedDepreciationTotal trend_TotalAssets   trend_AccountsPayable
     Min.   :-0.84216          Min.   :-0.53029         Min.   :  -0.677                       Min.   :  -0.6458                  Min.   :-0.406723   Min.   :-0.73410     
     1st Qu.:-0.03980          1st Qu.:-0.04862         1st Qu.:   0.017                       1st Qu.:   0.0268                  1st Qu.: 0.000054   1st Qu.:-0.05683     
     Median : 0.04195          Median : 0.03284         Median :   0.076                       Median :   0.0847                  Median : 0.059631   Median : 0.04418     
     Mean   : 0.10004          Mean   : 0.05557         Mean   :   6.447                       Mean   :   3.0990                  Mean   : 0.111276   Mean   : 0.19758     
     3rd Qu.: 0.14406          3rd Qu.: 0.12226         3rd Qu.:   0.179                       3rd Qu.:   0.1795                  3rd Qu.: 0.134079   3rd Qu.: 0.17830     
     Max.   :17.06163          Max.   : 3.36399         Max.   :6848.685                       Max.   :3096.1267                  Max.   : 8.583334   Max.   :31.80443     
     trend_AccruedExpenses trend_TotalCurrentLiabilities trend_TotalLiabilities trend_TotalEquity  trend_TotalLiabilitiesShareholders39Equity trend_TotalCommonSharesOutstanding
     Min.   : -2.14965     Min.   :-0.57447              Min.   :-1.165410      Min.   :-0.79279   Min.   :-0.406723                          Min.   :-0.2397981                
     1st Qu.: -0.03471     1st Qu.:-0.03521              1st Qu.:-0.000859      1st Qu.:-0.01839   1st Qu.: 0.000054                          1st Qu.:-0.0237050                
     Median :  0.06515     Median : 0.05244              Median : 0.071993      Median : 0.04573   Median : 0.059631                          Median :-0.0007237                
     Mean   :  0.42786     Mean   : 0.09467              Mean   : 0.168799      Mean   : 0.11337   Mean   : 0.111276                          Mean   : 0.0037673                
     3rd Qu.:  0.19369     3rd Qu.: 0.16164              3rd Qu.: 0.190091      3rd Qu.: 0.12290   3rd Qu.: 0.134079                          3rd Qu.: 0.0091543                
     Max.   :219.06311     Max.   : 3.71078              Max.   : 6.740887      Max.   :14.44631   Max.   : 8.583334                          Max.   : 1.9814186                
     trend_NetIncomeStartingLine trend_DepreciationDepletion trend_CashfromOperatingActivities trend_CapitalExpenditures trend_CashfromInvestingActivities trend_net_profit_margin
     Min.   :-16.12418           Min.   :-0.336588           Min.   :-51.19951                 Min.   :-0.76566          Min.   : -86.3774                 Min.   :-0.79759       
     1st Qu.: -0.07326           1st Qu.: 0.005172           1st Qu.: -0.03766                 1st Qu.:-0.04635          1st Qu.:  -0.2064                 1st Qu.:-0.11145       
     Median :  0.07770           Median : 0.075682           Median :  0.09435                 Median : 0.08687          Median :   0.1534                 Median : 0.02427       
     Mean   :  0.47072           Mean   : 0.119307           Mean   :  0.02612                 Mean   : 0.22407          Mean   :   1.8561                 Mean   : 0.41460       
     3rd Qu.:  0.26814           3rd Qu.: 0.171262           3rd Qu.:  0.26531                 3rd Qu.: 0.27767          3rd Qu.:   0.8454                 3rd Qu.: 0.21280       
     Max.   : 75.58699           Max.   : 5.151678           Max.   :  8.02099                 Max.   :19.65949          Max.   :1196.0003                 Max.   :67.36649       
     trend_cs_current_assets trend_cs_accounts_receivable trend_cs_current_liabilities trend_cs_accounts_payable trend_cs_total_liabilities_debt trend_cs_cost_of_goods_sold
     Min.   :-0.63901        Min.   :-0.853230            Min.   :-0.557595            Min.   :-0.77760          Min.   :-1.14016                Min.   :-0.861427          
     1st Qu.:-0.08571        1st Qu.:-0.090498            1st Qu.:-0.078916            1st Qu.:-0.11585          1st Qu.:-0.02654                1st Qu.:-0.021345          
     Median :-0.02054        Median :-0.013528            Median :-0.017067            Median :-0.01665          Median : 0.01575                Median :-0.003424          
     Mean   :-0.03604        Mean   : 0.007131            Mean   :-0.001967            Mean   : 0.10589          Mean   : 0.04332                Mean   :-0.005914          
     3rd Qu.: 0.01907        3rd Qu.: 0.048668            3rd Qu.: 0.058388            3rd Qu.: 0.07284          3rd Qu.: 0.06552                3rd Qu.: 0.011579          
     Max.   : 0.72104        Max.   :15.369121            Max.   : 1.645711            Max.   :33.04039          Max.   : 6.09278                Max.   : 1.105998          
     trend_cs_gross_profit trend_cs_income_from_operations trend_cs_net_income trend_cs_shareholders_equity trend_cs_cash_flow_from_operatons trend_cs_capital_expenditures
     Min.   :-0.522842     Min.   :-4.37368                Min.   :-0.79759    Min.   :-0.787634            Min.   :-51.69435                 Min.   :-0.79069             
     1st Qu.:-0.015087     1st Qu.:-0.09375                1st Qu.:-0.11145    1st Qu.:-0.067610            1st Qu.: -0.07756                 1st Qu.:-0.09034             
     Median : 0.007195     Median : 0.01727                Median : 0.02427    Median :-0.012930            Median :  0.03992                 Median : 0.04248             
     Mean   : 0.024672     Mean   : 0.12589                Mean   : 0.41460    Mean   :-0.004623            Mean   : -0.03046                 Mean   : 0.16331             
     3rd Qu.: 0.037530     3rd Qu.: 0.15206                3rd Qu.: 0.21280    3rd Qu.: 0.032075            3rd Qu.:  0.19509                 3rd Qu.: 0.20157             
     Max.   : 1.464669     Max.   :24.79179                Max.   :67.36649    Max.   : 7.875025            Max.   :  6.99948                 Max.   :21.02030             
     trend_ratios_current_ratio trend_ratios_quick_ratio trend_ratios_debt_to_total_assets trend_ratios_cash_flow_to_total_debt trend_ratios_debt_to_equity
     Min.   :-0.534691          Min.   :-0.726840        Min.   :-1.14016                  Min.   :-50.16557                    Min.   :-0.98646           
     1st Qu.:-0.085627          1st Qu.:-0.101300        1st Qu.:-0.02654                  1st Qu.: -0.14178                    1st Qu.:-0.05548           
     Median :-0.007615          Median :-0.001954        Median : 0.01575                  Median :  0.01269                    Median : 0.04460           
     Mean   : 0.006250          Mean   : 0.024306        Mean   : 0.04332                  Mean   : -0.04905                    Mean   : 0.28920           
     3rd Qu.: 0.079233          3rd Qu.: 0.106380        3rd Qu.: 0.06552                  3rd Qu.:  0.19778                    3rd Qu.: 0.17339           
     Max.   : 1.370583          Max.   : 3.414152        Max.   : 6.09278                  Max.   :  7.68030                    Max.   :78.53328           
     trend_ratios_equity_multiplier trend_ratios_gross_profit_margin trend_ratios_operating_profit_margin trend_ratios_net_profit_margin trend_ratios_income_to_assets
     Min.   :-0.55301               Min.   :-0.522842                Min.   :-4.37368                     Min.   :-0.79759               Min.   :-0.8032              
     1st Qu.:-0.02526               1st Qu.:-0.015087                1st Qu.:-0.09375                     1st Qu.:-0.11145               1st Qu.:-0.1437              
     Median : 0.01765               Median : 0.007195                Median : 0.01727                     Median : 0.02427               Median : 0.0088              
     Mean   : 0.12852               Mean   : 0.024672                Mean   : 0.12589                     Mean   : 0.41460               Mean   : 0.4744              
     3rd Qu.: 0.08425               3rd Qu.: 0.037530                3rd Qu.: 0.15206                     3rd Qu.: 0.21280               3rd Qu.: 0.2014              
     Max.   :42.29845               Max.   : 1.464669                Max.   :24.79179                     Max.   :67.36649               Max.   :79.8686              
     trend_ratios_income_to_equity
     Min.   :-0.80462             
     1st Qu.:-0.12349             
     Median : 0.03948             
     Mean   : 0.54888             
     3rd Qu.: 0.25818             
     Max.   :78.46628             

Exploring Data
==============

Collinearity
------------

``` r
kable(get_correlations(df_stocks_full, corr_threshold = 0.7, p_value_threshold = 0.2))
```

|                                             |  perc\_change\_stock\_1year|  diff\_above\_index\_1year|  TotalRevenue|  CostofRevenueTotal|  GrossProfit|  SellingGeneralAdminExpensesTotal|  ResearchDevelopment|  TotalOperatingExpense|  OperatingIncome|  IncomeBeforeTax|  IncomeAfterTax|  NetIncomeBeforeExtraItems|  NetIncome|  IncomeAvailabletoCommonExclExtraItems|  IncomeAvailabletoCommonInclExtraItems|  DilutedWeightedAverageShares|  DilutedEPSExcludingExtraordinaryItems|  DividendsperShareCommonStockPrimaryIssue|  DilutedNormalizedEPS|  CashEquivalents|  CashandShortTermInvestments|  AccountsReceivableTradeNet|  TotalReceivablesNet|  TotalInventory|  OtherCurrentAssetsTotal|  TotalCurrentAssets|  PropertyPlantEquipmentTotalGross|  AccumulatedDepreciationTotal|  GoodwillNet|  IntangiblesNet|  OtherLongTermAssetsTotal|  TotalAssets|  AccountsPayable|  AccruedExpenses|  NotesPayableShortTermDebt|  OtherCurrentliabilitiesTotal|  TotalCurrentLiabilities|  LongTermDebt|  TotalLongTermDebt|  TotalDebt|  OtherLiabilitiesTotal|  TotalLiabilities|  CommonStockTotal|  AdditionalPaidInCapital|  RetainedEarningsAccumulatedDeficit|  TotalEquity|  TotalLiabilitiesShareholders39Equity|  TotalCommonSharesOutstanding|  NetIncomeStartingLine|  DepreciationDepletion|  DeferredTaxes|  NonCashItems|  ChangesinWorkingCapital|  CashfromOperatingActivities|  CapitalExpenditures|  OtherInvestingCashFlowItemsTotal|  CashfromInvestingActivities|  FinancingCashFlowItems|  CashfromFinancingActivities|  NetChangeinCash|  CashInterestPaidSupplemental|  CashTaxesPaidSupplemental|  net\_profit\_margin|  cs\_current\_assets|  cs\_cash\_short\_term\_investments|  cs\_accounts\_receivable|  cs\_inventories|  cs\_goodwill|  cs\_current\_liabilities|  cs\_accounts\_payable|  cs\_long\_term\_debt|  cs\_total\_liabilities\_debt|  cs\_cost\_of\_goods\_sold|  cs\_gross\_profit|  cs\_rd|  cs\_income\_from\_operations|  cs\_net\_income|  cs\_shareholders\_equity|  cs\_cash\_flow\_from\_operatons|  cs\_capital\_expenditures|  ratios\_current\_ratio|  ratios\_quick\_ratio|  ratios\_cash\_ratio|  ratios\_debt\_to\_total\_assets|  ratios\_long\_term\_debt\_to\_total\_assets|  ratios\_cash\_flow\_to\_total\_debt|  ratios\_debt\_to\_equity|  ratios\_equity\_multiplier|  ratios\_intangible\_assets|  ratios\_rd\_as\_perc\_revenue|  ratios\_gross\_profit\_margin|  ratios\_operating\_profit\_margin|  ratios\_net\_profit\_margin|  ratios\_income\_to\_assets|  ratios\_income\_to\_equity|
|---------------------------------------------|---------------------------:|--------------------------:|-------------:|-------------------:|------------:|---------------------------------:|--------------------:|----------------------:|----------------:|----------------:|---------------:|--------------------------:|----------:|--------------------------------------:|--------------------------------------:|-----------------------------:|--------------------------------------:|-----------------------------------------:|---------------------:|----------------:|----------------------------:|---------------------------:|--------------------:|---------------:|------------------------:|-------------------:|---------------------------------:|-----------------------------:|------------:|---------------:|-------------------------:|------------:|----------------:|----------------:|--------------------------:|-----------------------------:|------------------------:|-------------:|------------------:|----------:|----------------------:|-----------------:|-----------------:|------------------------:|-----------------------------------:|------------:|-------------------------------------:|-----------------------------:|----------------------:|----------------------:|--------------:|-------------:|------------------------:|----------------------------:|--------------------:|---------------------------------:|----------------------------:|-----------------------:|----------------------------:|----------------:|-----------------------------:|--------------------------:|--------------------:|--------------------:|-----------------------------------:|-------------------------:|----------------:|-------------:|-------------------------:|----------------------:|---------------------:|-----------------------------:|--------------------------:|------------------:|-------:|-----------------------------:|----------------:|-------------------------:|--------------------------------:|--------------------------:|-----------------------:|---------------------:|--------------------:|--------------------------------:|--------------------------------------------:|------------------------------------:|-------------------------:|---------------------------:|---------------------------:|------------------------------:|------------------------------:|----------------------------------:|----------------------------:|---------------------------:|---------------------------:|
| perc\_change\_stock\_1year                  |                          NA|                       0.97|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| diff\_above\_index\_1year                   |                        0.97|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalRevenue                                |                          NA|                         NA|            NA|                0.93|         0.88|                              0.84|                   NA|                   0.99|             0.83|             0.83|            0.82|                       0.81|       0.79|                                   0.81|                                   0.79|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                        0.71|                 0.75|            0.71|                       NA|                0.80|                              0.71|                            NA|           NA|              NA|                        NA|         0.88|             0.81|               NA|                         NA|                            NA|                     0.85|            NA|                 NA|       0.70|                     NA|              0.83|                NA|                       NA|                                0.79|         0.81|                                  0.88|                            NA|                   0.78|                   0.73|             NA|            NA|                       NA|                         0.83|                -0.75|                                NA|                        -0.73|                      NA|                           NA|               NA|                            NA|                       0.74|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CostofRevenueTotal                          |                          NA|                         NA|          0.93|                  NA|           NA|                                NA|                   NA|                   0.95|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                 0.70|            0.73|                       NA|                0.72|                                NA|                            NA|           NA|              NA|                        NA|         0.71|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                  0.71|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| GrossProfit                                 |                          NA|                         NA|          0.88|                  NA|           NA|                              0.91|                   NA|                   0.84|             0.90|             0.86|            0.86|                       0.86|       0.83|                                   0.86|                                   0.83|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.74|                              0.79|                         -0.74|           NA|              NA|                        NA|         0.92|             0.80|             0.71|                         NA|                          0.74|                     0.89|          0.81|               0.80|       0.82|                     NA|              0.90|                NA|                       NA|                                0.75|         0.83|                                  0.92|                            NA|                   0.83|                   0.87|             NA|            NA|                       NA|                         0.95|                -0.86|                                NA|                        -0.85|                      NA|                           NA|               NA|                          0.75|                       0.73|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| SellingGeneralAdminExpensesTotal            |                          NA|                         NA|          0.84|                  NA|         0.91|                                NA|                   NA|                   0.83|             0.74|             0.71|            0.71|                       0.71|         NA|                                   0.71|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                              0.74|                         -0.71|           NA|              NA|                        NA|         0.82|             0.84|               NA|                         NA|                            NA|                     0.82|          0.70|                 NA|       0.71|                     NA|              0.81|                NA|                       NA|                                  NA|         0.73|                                  0.82|                            NA|                     NA|                   0.76|             NA|            NA|                       NA|                         0.81|                -0.73|                                NA|                        -0.71|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ResearchDevelopment                         |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalOperatingExpense                       |                          NA|                         NA|          0.99|                0.95|         0.84|                              0.83|                   NA|                     NA|             0.76|             0.77|            0.75|                       0.75|       0.73|                                   0.75|                                   0.73|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                 0.73|            0.73|                       NA|                0.77|                                NA|                            NA|           NA|              NA|                        NA|         0.85|             0.81|               NA|                         NA|                            NA|                     0.83|            NA|                 NA|         NA|                     NA|              0.81|                NA|                       NA|                                0.76|         0.78|                                  0.85|                            NA|                   0.72|                     NA|             NA|            NA|                       NA|                         0.78|                -0.71|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OperatingIncome                             |                          NA|                         NA|          0.83|                  NA|         0.90|                              0.74|                   NA|                   0.76|               NA|             0.98|            0.97|                       0.97|       0.93|                                   0.97|                                   0.93|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.75|                          NA|                   NA|              NA|                       NA|                0.79|                                NA|                            NA|           NA|              NA|                        NA|         0.86|               NA|               NA|                         NA|                            NA|                     0.76|          0.70|                 NA|       0.71|                     NA|              0.79|                NA|                       NA|                                0.77|         0.83|                                  0.86|                            NA|                   0.93|                   0.73|             NA|            NA|                       NA|                         0.93|                -0.77|                                NA|                        -0.79|                      NA|                           NA|               NA|                            NA|                       0.80|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| IncomeBeforeTax                             |                          NA|                         NA|          0.83|                  NA|         0.86|                              0.71|                   NA|                   0.77|             0.98|               NA|            0.99|                       0.98|       0.95|                                   0.98|                                   0.95|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.77|                          NA|                 0.71|              NA|                       NA|                0.81|                                NA|                            NA|           NA|              NA|                        NA|         0.84|               NA|               NA|                         NA|                            NA|                     0.74|            NA|                 NA|         NA|                     NA|              0.74|                NA|                       NA|                                0.81|         0.84|                                  0.84|                            NA|                   0.94|                     NA|             NA|            NA|                       NA|                         0.90|                -0.74|                                NA|                        -0.75|                      NA|                           NA|               NA|                            NA|                       0.84|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| IncomeAfterTax                              |                          NA|                         NA|          0.82|                  NA|         0.86|                              0.71|                   NA|                   0.75|             0.97|             0.99|              NA|                       1.00|       0.97|                                   1.00|                                   0.97|                            NA|                                     NA|                                        NA|                    NA|             0.70|                         0.79|                          NA|                 0.71|              NA|                       NA|                0.82|                                NA|                            NA|           NA|              NA|                        NA|         0.85|               NA|               NA|                         NA|                            NA|                     0.75|            NA|                 NA|         NA|                     NA|              0.74|                NA|                       NA|                                0.80|         0.85|                                  0.85|                            NA|                   0.96|                   0.71|             NA|            NA|                       NA|                         0.90|                -0.73|                                NA|                        -0.74|                      NA|                           NA|               NA|                            NA|                       0.82|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NetIncomeBeforeExtraItems                   |                          NA|                         NA|          0.81|                  NA|         0.86|                              0.71|                   NA|                   0.75|             0.97|             0.98|            1.00|                         NA|       0.97|                                   1.00|                                   0.97|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.79|                          NA|                 0.71|              NA|                       NA|                0.82|                                NA|                            NA|           NA|              NA|                        NA|         0.84|               NA|               NA|                         NA|                            NA|                     0.75|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                0.80|         0.85|                                  0.84|                            NA|                   0.96|                   0.70|             NA|            NA|                       NA|                         0.90|                -0.73|                                NA|                        -0.74|                      NA|                           NA|               NA|                            NA|                       0.82|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NetIncome                                   |                          NA|                         NA|          0.79|                  NA|         0.83|                                NA|                   NA|                   0.73|             0.93|             0.95|            0.97|                       0.97|         NA|                                   0.97|                                   1.00|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.79|                          NA|                 0.70|              NA|                       NA|                0.81|                                NA|                            NA|           NA|              NA|                        NA|         0.83|               NA|               NA|                         NA|                            NA|                     0.74|            NA|                 NA|         NA|                     NA|              0.71|                NA|                       NA|                                0.77|         0.84|                                  0.83|                            NA|                   0.98|                     NA|             NA|            NA|                       NA|                         0.87|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                       0.81|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| IncomeAvailabletoCommonExclExtraItems       |                          NA|                         NA|          0.81|                  NA|         0.86|                              0.71|                   NA|                   0.75|             0.97|             0.98|            1.00|                       1.00|       0.97|                                     NA|                                   0.97|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.79|                          NA|                 0.71|              NA|                       NA|                0.82|                                NA|                            NA|           NA|              NA|                        NA|         0.84|               NA|               NA|                         NA|                            NA|                     0.75|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                0.80|         0.85|                                  0.84|                            NA|                   0.96|                   0.70|             NA|            NA|                       NA|                         0.90|                -0.73|                                NA|                        -0.74|                      NA|                           NA|               NA|                            NA|                       0.82|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| IncomeAvailabletoCommonInclExtraItems       |                          NA|                         NA|          0.79|                  NA|         0.83|                                NA|                   NA|                   0.73|             0.93|             0.95|            0.97|                       0.97|       1.00|                                   0.97|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.79|                          NA|                 0.70|              NA|                       NA|                0.81|                                NA|                            NA|           NA|              NA|                        NA|         0.83|               NA|               NA|                         NA|                            NA|                     0.73|            NA|                 NA|         NA|                     NA|              0.71|                NA|                       NA|                                0.77|         0.84|                                  0.83|                            NA|                   0.98|                     NA|             NA|            NA|                       NA|                         0.87|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                       0.81|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DilutedWeightedAverageShares                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                             1|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DilutedEPSExcludingExtraordinaryItems       |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                  0.99|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DividendsperShareCommonStockPrimaryIssue    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DilutedNormalizedEPS                        |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                   0.99|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashEquivalents                             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|            0.70|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.81|                          NA|                   NA|              NA|                       NA|                0.79|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashandShortTermInvestments                 |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|             0.75|             0.77|            0.79|                       0.79|       0.79|                                   0.79|                                   0.79|                            NA|                                     NA|                                        NA|                    NA|             0.81|                           NA|                        0.74|                 0.76|              NA|                       NA|                0.93|                                NA|                            NA|           NA|              NA|                        NA|         0.72|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|         0.76|                                  0.72|                            NA|                   0.78|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| AccountsReceivableTradeNet                  |                          NA|                         NA|          0.71|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.74|                          NA|                 0.98|              NA|                       NA|                0.89|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                     0.72|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalReceivablesNet                         |                          NA|                         NA|          0.75|                0.70|           NA|                                NA|                   NA|                   0.73|               NA|             0.71|            0.71|                       0.71|       0.70|                                   0.71|                                   0.70|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.76|                        0.98|                   NA|              NA|                       NA|                0.91|                                NA|                            NA|           NA|              NA|                        NA|         0.73|               NA|               NA|                         NA|                            NA|                     0.76|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                  0.73|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalInventory                              |                          NA|                         NA|          0.71|                0.73|           NA|                                NA|                   NA|                   0.73|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OtherCurrentAssetsTotal                     |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalCurrentAssets                          |                          NA|                         NA|          0.80|                0.72|         0.74|                                NA|                   NA|                   0.77|             0.79|             0.81|            0.82|                       0.82|       0.81|                                   0.82|                                   0.81|                            NA|                                     NA|                                        NA|                    NA|             0.79|                         0.93|                        0.89|                 0.91|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.82|               NA|             0.70|                         NA|                          0.75|                     0.80|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                0.72|         0.80|                                  0.82|                            NA|                   0.78|                     NA|             NA|            NA|                       NA|                         0.73|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| PropertyPlantEquipmentTotalGross            |                          NA|                         NA|          0.71|                  NA|         0.79|                              0.74|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                         -0.98|           NA|              NA|                        NA|         0.84|             0.78|               NA|                         NA|                            NA|                     0.76|            NA|                 NA|         NA|                     NA|              0.75|                NA|                       NA|                                  NA|         0.82|                                  0.84|                            NA|                     NA|                   0.89|             NA|            NA|                       NA|                         0.84|                -0.90|                                NA|                        -0.80|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| AccumulatedDepreciationTotal                |                          NA|                         NA|            NA|                  NA|        -0.74|                             -0.71|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                             -0.98|                            NA|           NA|              NA|                        NA|        -0.79|            -0.75|               NA|                         NA|                            NA|                    -0.73|            NA|                 NA|         NA|                     NA|             -0.70|                NA|                       NA|                                  NA|        -0.79|                                 -0.79|                            NA|                     NA|                  -0.85|             NA|            NA|                       NA|                        -0.80|                 0.84|                                NA|                         0.73|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| GoodwillNet                                 |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|              0.71|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| IntangiblesNet                              |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OtherLongTermAssetsTotal                    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.72|               NA|               NA|                         NA|                            NA|                     0.72|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                  NA|           NA|                                  0.72|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalAssets                                 |                          NA|                         NA|          0.88|                0.71|         0.92|                              0.82|                   NA|                   0.85|             0.86|             0.84|            0.85|                       0.84|       0.83|                                   0.84|                                   0.83|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.72|                          NA|                 0.73|              NA|                       NA|                0.82|                              0.84|                         -0.79|           NA|              NA|                      0.72|           NA|             0.80|             0.71|                         NA|                          0.79|                     0.92|          0.80|               0.81|       0.84|                   0.73|              0.95|                NA|                       NA|                                0.79|         0.93|                                  1.00|                            NA|                   0.84|                   0.86|             NA|            NA|                       NA|                         0.92|                -0.87|                                NA|                        -0.85|                      NA|                           NA|               NA|                            NA|                       0.75|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| AccountsPayable                             |                          NA|                         NA|          0.81|                  NA|         0.80|                              0.84|                   NA|                   0.81|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                              0.78|                         -0.75|           NA|              NA|                        NA|         0.80|               NA|               NA|                         NA|                            NA|                     0.87|            NA|                 NA|         NA|                     NA|              0.80|                NA|                       NA|                                  NA|           NA|                                  0.80|                            NA|                     NA|                   0.79|             NA|            NA|                       NA|                         0.77|                -0.78|                                NA|                        -0.74|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| AccruedExpenses                             |                          NA|                         NA|            NA|                  NA|         0.71|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.70|                                NA|                            NA|           NA|              NA|                        NA|         0.71|               NA|               NA|                         NA|                            NA|                     0.76|            NA|                 NA|         NA|                     NA|              0.71|                NA|                       NA|                                  NA|           NA|                                  0.71|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NotesPayableShortTermDebt                   |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OtherCurrentliabilitiesTotal                |                          NA|                         NA|            NA|                  NA|         0.74|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.75|                                NA|                            NA|           NA|              NA|                        NA|         0.79|               NA|               NA|                         NA|                            NA|                     0.83|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                  NA|         0.75|                                  0.79|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                         0.73|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalCurrentLiabilities                     |                          NA|                         NA|          0.85|                  NA|         0.89|                              0.82|                   NA|                   0.83|             0.76|             0.74|            0.75|                       0.75|       0.74|                                   0.75|                                   0.73|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                        0.72|                 0.76|              NA|                       NA|                0.80|                              0.76|                         -0.73|           NA|              NA|                      0.72|         0.92|             0.87|             0.76|                         NA|                          0.83|                       NA|          0.73|               0.73|       0.81|                     NA|              0.91|                NA|                       NA|                                  NA|         0.80|                                  0.92|                            NA|                   0.75|                   0.81|             NA|            NA|                       NA|                         0.86|                -0.79|                                NA|                        -0.79|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| LongTermDebt                                |                          NA|                         NA|            NA|                  NA|         0.81|                              0.70|                   NA|                     NA|             0.70|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.80|               NA|               NA|                         NA|                            NA|                     0.73|            NA|               0.99|       0.97|                     NA|              0.91|                NA|                       NA|                                  NA|           NA|                                  0.80|                            NA|                     NA|                   0.78|             NA|            NA|                       NA|                         0.79|                -0.75|                                NA|                        -0.77|                      NA|                           NA|               NA|                          0.89|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalLongTermDebt                           |                          NA|                         NA|            NA|                  NA|         0.80|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.81|               NA|               NA|                         NA|                            NA|                     0.73|          0.99|                 NA|       0.98|                     NA|              0.92|                NA|                       NA|                                  NA|           NA|                                  0.81|                            NA|                     NA|                   0.78|             NA|            NA|                       NA|                         0.78|                -0.75|                                NA|                        -0.77|                      NA|                           NA|               NA|                          0.89|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalDebt                                   |                          NA|                         NA|          0.70|                  NA|         0.82|                              0.71|                   NA|                     NA|             0.71|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.84|               NA|               NA|                         NA|                            NA|                     0.81|          0.97|               0.98|         NA|                     NA|              0.94|                NA|                       NA|                                  NA|           NA|                                  0.84|                            NA|                     NA|                   0.80|             NA|            NA|                       NA|                         0.81|                -0.76|                                NA|                        -0.79|                      NA|                           NA|               NA|                          0.87|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OtherLiabilitiesTotal                       |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.73|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|              0.75|                NA|                       NA|                                  NA|           NA|                                  0.73|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalLiabilities                            |                          NA|                         NA|          0.83|                  NA|         0.90|                              0.81|                   NA|                   0.81|             0.79|             0.74|            0.74|                       0.73|       0.71|                                   0.73|                                   0.71|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.73|                              0.75|                         -0.70|         0.71|              NA|                      0.73|         0.95|             0.80|             0.71|                         NA|                          0.73|                     0.91|          0.91|               0.92|       0.94|                   0.75|                NA|                NA|                       NA|                                  NA|         0.76|                                  0.95|                            NA|                   0.73|                   0.84|             NA|            NA|                       NA|                         0.87|                -0.83|                                NA|                        -0.82|                      NA|                           NA|               NA|                          0.79|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CommonStockTotal                            |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| AdditionalPaidInCapital                     |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| RetainedEarningsAccumulatedDeficit          |                          NA|                         NA|          0.79|                  NA|         0.75|                                NA|                   NA|                   0.76|             0.77|             0.81|            0.80|                       0.80|       0.77|                                   0.80|                                   0.77|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.72|                                NA|                            NA|           NA|              NA|                        NA|         0.79|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|         0.83|                                  0.79|                            NA|                   0.76|                     NA|             NA|            NA|                       NA|                         0.75|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                       0.79|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalEquity                                 |                          NA|                         NA|          0.81|                  NA|         0.83|                              0.73|                   NA|                   0.78|             0.83|             0.84|            0.85|                       0.85|       0.84|                                   0.85|                                   0.84|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.76|                          NA|                   NA|              NA|                       NA|                0.80|                              0.82|                         -0.79|           NA|              NA|                        NA|         0.93|               NA|               NA|                         NA|                          0.75|                     0.80|            NA|                 NA|         NA|                     NA|              0.76|                NA|                       NA|                                0.83|           NA|                                  0.93|                            NA|                   0.86|                   0.77|             NA|            NA|                       NA|                         0.86|                -0.80|                                NA|                        -0.77|                      NA|                           NA|               NA|                            NA|                       0.76|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalLiabilitiesShareholders39Equity        |                          NA|                         NA|          0.88|                0.71|         0.92|                              0.82|                   NA|                   0.85|             0.86|             0.84|            0.85|                       0.84|       0.83|                                   0.84|                                   0.83|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.72|                          NA|                 0.73|              NA|                       NA|                0.82|                              0.84|                         -0.79|           NA|              NA|                      0.72|         1.00|             0.80|             0.71|                         NA|                          0.79|                     0.92|          0.80|               0.81|       0.84|                   0.73|              0.95|                NA|                       NA|                                0.79|         0.93|                                    NA|                            NA|                   0.84|                   0.86|             NA|            NA|                       NA|                         0.92|                -0.87|                                NA|                        -0.85|                      NA|                           NA|               NA|                            NA|                       0.75|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| TotalCommonSharesOutstanding                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                             1|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NetIncomeStartingLine                       |                          NA|                         NA|          0.78|                  NA|         0.83|                                NA|                   NA|                   0.72|             0.93|             0.94|            0.96|                       0.96|       0.98|                                   0.96|                                   0.98|                            NA|                                     NA|                                        NA|                    NA|               NA|                         0.78|                          NA|                   NA|              NA|                       NA|                0.78|                                NA|                            NA|           NA|              NA|                        NA|         0.84|               NA|               NA|                         NA|                            NA|                     0.75|            NA|                 NA|         NA|                     NA|              0.73|                NA|                       NA|                                0.76|         0.86|                                  0.84|                            NA|                     NA|                   0.70|             NA|            NA|                       NA|                         0.88|                -0.72|                                NA|                        -0.72|                      NA|                           NA|               NA|                            NA|                       0.86|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DepreciationDepletion                       |                          NA|                         NA|          0.73|                  NA|         0.87|                              0.76|                   NA|                     NA|             0.73|               NA|            0.71|                       0.70|         NA|                                   0.70|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                              0.89|                         -0.85|           NA|              NA|                        NA|         0.86|             0.79|               NA|                         NA|                            NA|                     0.81|          0.78|               0.78|       0.80|                     NA|              0.84|                NA|                       NA|                                  NA|         0.77|                                  0.86|                            NA|                   0.70|                     NA|             NA|            NA|                       NA|                         0.91|                -0.94|                                NA|                        -0.89|                      NA|                           NA|               NA|                          0.78|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| DeferredTaxes                               |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NonCashItems                                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ChangesinWorkingCapital                     |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashfromOperatingActivities                 |                          NA|                         NA|          0.83|                  NA|         0.95|                              0.81|                   NA|                   0.78|             0.93|             0.90|            0.90|                       0.90|       0.87|                                   0.90|                                   0.87|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                0.73|                              0.84|                         -0.80|           NA|              NA|                        NA|         0.92|             0.77|               NA|                         NA|                          0.73|                     0.86|          0.79|               0.78|       0.81|                     NA|              0.87|                NA|                       NA|                                0.75|         0.86|                                  0.92|                            NA|                   0.88|                   0.91|             NA|            NA|                       NA|                           NA|                -0.91|                                NA|                        -0.90|                      NA|                           NA|               NA|                          0.75|                       0.75|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CapitalExpenditures                         |                          NA|                         NA|         -0.75|                  NA|        -0.86|                             -0.73|                   NA|                  -0.71|            -0.77|            -0.74|           -0.73|                      -0.73|         NA|                                  -0.73|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                             -0.90|                          0.84|           NA|              NA|                        NA|        -0.87|            -0.78|               NA|                         NA|                            NA|                    -0.79|         -0.75|              -0.75|      -0.76|                     NA|             -0.83|                NA|                       NA|                                  NA|        -0.80|                                 -0.87|                            NA|                  -0.72|                  -0.94|             NA|            NA|                       NA|                        -0.91|                   NA|                                NA|                         0.92|                      NA|                           NA|               NA|                         -0.73|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| OtherInvestingCashFlowItemsTotal            |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashfromInvestingActivities                 |                          NA|                         NA|         -0.73|                  NA|        -0.85|                             -0.71|                   NA|                     NA|            -0.79|            -0.75|           -0.74|                      -0.74|         NA|                                  -0.74|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                             -0.80|                          0.73|           NA|              NA|                        NA|        -0.85|            -0.74|               NA|                         NA|                            NA|                    -0.79|         -0.77|              -0.77|      -0.79|                     NA|             -0.82|                NA|                       NA|                                  NA|        -0.77|                                 -0.85|                            NA|                  -0.72|                  -0.89|             NA|            NA|                       NA|                        -0.90|                 0.92|                                NA|                           NA|                      NA|                           NA|               NA|                         -0.72|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| FinancingCashFlowItems                      |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashfromFinancingActivities                 |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| NetChangeinCash                             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashInterestPaidSupplemental                |                          NA|                         NA|            NA|                  NA|         0.75|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|          0.89|               0.89|       0.87|                     NA|              0.79|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                   0.78|             NA|            NA|                       NA|                         0.75|                -0.73|                                NA|                        -0.72|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| CashTaxesPaidSupplemental                   |                          NA|                         NA|          0.74|                  NA|         0.73|                                NA|                   NA|                     NA|             0.80|             0.84|            0.82|                       0.82|       0.81|                                   0.82|                                   0.81|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|         0.75|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                0.79|         0.76|                                  0.75|                            NA|                   0.86|                     NA|             NA|            NA|                       NA|                         0.75|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| net\_profit\_margin                         |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                          0.82|             1.00|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                               0.82|                         1.00|                          NA|                          NA|
| cs\_current\_assets                         |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_cash\_short\_term\_investments          |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_accounts\_receivable                    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_inventories                             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_goodwill                                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_current\_liabilities                    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_accounts\_payable                       |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_long\_term\_debt                        |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                            1|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_total\_liabilities\_debt                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        -1|                               NA|                         NA|                      NA|                    NA|                   NA|                                1|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_cost\_of\_goods\_sold                   |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_gross\_profit                           |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                              1|                                 NA|                           NA|                          NA|                          NA|
| cs\_rd                                      |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                              1|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_income\_from\_operations                |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                 0.82|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|             0.82|                        NA|                             0.78|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                               1.00|                         0.82|                          NA|                          NA|
| cs\_net\_income                             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                 1.00|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                          0.82|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                               0.82|                         1.00|                          NA|                          NA|
| cs\_shareholders\_equity                    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            -1|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               -1|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| cs\_cash\_flow\_from\_operatons             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                          0.78|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                               0.78|                           NA|                          NA|                          NA|
| cs\_capital\_expenditures                   |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_current\_ratio                      |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                  0.94|                 0.87|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_quick\_ratio                        |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                    0.94|                    NA|                 0.95|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_cash\_ratio                         |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                    0.87|                  0.95|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_debt\_to\_total\_assets             |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                             1|                         NA|                 NA|      NA|                            NA|               NA|                        -1|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_long\_term\_debt\_to\_total\_assets |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                     1|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_cash\_flow\_to\_total\_debt         |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_debt\_to\_equity                    |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                        1.00|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                        0.81|
| ratios\_equity\_multiplier                  |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                      1.00|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                        0.81|
| ratios\_intangible\_assets                  |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_rd\_as\_perc\_revenue               |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|       1|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_gross\_profit\_margin               |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                  1|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_operating\_profit\_margin           |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                 0.82|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                          1.00|             0.82|                        NA|                             0.78|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                         0.82|                          NA|                          NA|
| ratios\_net\_profit\_margin                 |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                 1.00|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                          0.82|             1.00|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                               0.82|                           NA|                          NA|                          NA|
| ratios\_income\_to\_assets                  |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                        NA|                          NA|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|
| ratios\_income\_to\_equity                  |                          NA|                         NA|            NA|                  NA|           NA|                                NA|                   NA|                     NA|               NA|               NA|              NA|                         NA|         NA|                                     NA|                                     NA|                            NA|                                     NA|                                        NA|                    NA|               NA|                           NA|                          NA|                   NA|              NA|                       NA|                  NA|                                NA|                            NA|           NA|              NA|                        NA|           NA|               NA|               NA|                         NA|                            NA|                       NA|            NA|                 NA|         NA|                     NA|                NA|                NA|                       NA|                                  NA|           NA|                                    NA|                            NA|                     NA|                     NA|             NA|            NA|                       NA|                           NA|                   NA|                                NA|                           NA|                      NA|                           NA|               NA|                            NA|                         NA|                   NA|                   NA|                                  NA|                        NA|               NA|            NA|                        NA|                     NA|                    NA|                            NA|                         NA|                 NA|      NA|                            NA|               NA|                        NA|                               NA|                         NA|                      NA|                    NA|                   NA|                               NA|                                           NA|                                   NA|                      0.81|                        0.81|                          NA|                             NA|                             NA|                                 NA|                           NA|                          NA|                          NA|

> The high correlations among absolute data (as opposed to ratios) suggests that using ratios might yield better or more valid results in models where multi-collinearity causes problems.
>
> Rather than removing all of these columns, I will keep them in for now (with the exception of Revenue which will be removed (TotalRevenue will remain)), and extract the columns I want to work with for particular models.

Correlation, Maximal Information Coefficient
--------------------------------------------

-   The following graph shows correlations and the Maximal Information Coefficient (second column) between many of the potential predictor variables and `perc_change_stock_1year` (the change in stock price from the time the financial statement was released to 1 year later (using moving average to account for daily fluctuations and random noise).
    -   it is faceted into 3 groups (`Absolute`, `Common Size`, and `Ratio`).
    -   `Absolute` are raw numbers from the financial statements (e.g. Total Revenue)
    -   `Common Size` are ratios expressed as a percentage of Sales, Assets, etc., depending on the particular financial statement (income statement, balance sheet, cash flow)
    -   `Ratio` are common ratios used to access the health of the company (e.g. Profit Margin, Quick Ratio, etc.)
-   As you can see, the correlations are lower than expected, and a lot are negative (left of vertical reference line). Personally, I expected some of the financial ratios in particular to be higher correlated with the change of stock price (i.e. higher financial ratios mean healthier companies which means higher gains in stock price).
-   As a result, I used the Maximal Information Coefficient (MIC) which, according to this [blog post](http://menugget.blogspot.de/2011/12/maximal-information-coefficient-mic.html) the MIC measurement is 'able to equally describe the correlation between paired variables regardless of linear or nonlinear relationship'.
-   Interestingly, there is not much relationship between the correlation measure and MIC, and from looking ranking of both (not shown; only ranked by MIC in graph), it appears MIC is a better measure.
-   Also, variables that are `absolute` values tend to have lower correlations (and more negative correlations) then `common size` and `ratio` variables, suggesting some/most absolute ratios should be ignored in linear regression models.

> Overall, the low/negative correlations suggests that my original plan of using a form of linear regression will probably not result in any significant results.

<img src="r-stocks-research_files/figure-markdown_github/maximal_information_coefficient-1.png" width="750px" />

Looking at Data
---------------

-   Looking at variables against `diff_above_index_1year`

### Variables with High MIC

<img src="r-stocks-research_files/figure-markdown_github/mic_graphs-1.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-2.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-3.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-4.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-5.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-6.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-7.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-8.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-9.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-10.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-11.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-12.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-13.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-14.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-15.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-16.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-17.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-18.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/mic_graphs-19.png" width="750px" />

> No clear linear patterns found (visually), which is interesting.

### Trend Variables

<img src="r-stocks-research_files/figure-markdown_github/trend_graphs-1.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-2.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-3.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-4.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-5.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-6.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-7.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-8.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-9.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-10.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-11.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-12.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-13.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-14.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-15.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-16.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-17.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-18.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-19.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-20.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-21.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-22.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-23.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-24.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-25.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-26.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-27.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-28.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-29.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-30.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-31.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-32.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-33.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-34.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-35.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-36.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-37.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-38.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-39.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-40.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-41.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-42.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-43.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-44.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-45.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-46.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-47.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-48.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-49.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-50.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-51.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-52.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-53.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-54.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-55.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-56.png" width="750px" /><img src="r-stocks-research_files/figure-markdown_github/trend_graphs-57.png" width="750px" />

> No clear linear patterns found (visually), which is interesting.

Clustering
==========

-   Before we get into prediction, I'm wondering if there distinguishable segments that we could organic the stocks into, from which patterns (in the dependent variables) would would arise.
-   I'm going to try to leave the dependent variables out (e.g. `diff_above_index_1year`) and then add them back in after clusting (because presumably if we would like to use clustering to aid in prediction, we would have to cluster on only the independent variables that we would have at the time of clustering/prediction).

> I will be using hierarchical clustering, primarily because k-means clustering starts with a random choice of cluster center and, therefore, will most likely yield different results each time it is ran (with the same data). Hierarchical will most likely be more consistent.

    ## 
    ## 
    ## ## Clustering - common size 
    ## 
    ## > ideal number of clusters: 3

<img src="r-stocks-research_files/figure-markdown_github/segmentation-1.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1838          0.1191985        0.2998669               0.0435299             0.2729245
    ##        2   2490          0.1915099        0.3832531               0.1148630             0.3530087

<img src="r-stocks-research_files/figure-markdown_github/segmentation-2.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1838          0.1191985        0.2998669               0.0435299             0.2729245
    ##        2    856          0.1940952        0.3472759               0.1176098             0.3238436
    ##        3   1634          0.1901555        0.4009095               0.1134240             0.3674522

<img src="r-stocks-research_files/figure-markdown_github/segmentation-3.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1309          0.1338172        0.3040671               0.0595604             0.2755039
    ##        2    856          0.1940952        0.3472759               0.1176098             0.3238436
    ##        3   1634          0.1901555        0.4009095               0.1134240             0.3674522
    ##        4    529          0.0830249        0.2862965               0.0038628             0.2625090

<img src="r-stocks-research_files/figure-markdown_github/segmentation-4.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1309          0.1338172        0.3040671               0.0595604             0.2755039
    ##        2    655          0.1708070        0.3025643               0.0978313             0.2805639
    ##        3    201          0.2699846        0.4567828               0.1820625             0.4306756
    ##        4   1634          0.1901555        0.4009095               0.1134240             0.3674522
    ##        5    529          0.0830249        0.2862965               0.0038628             0.2625090
    ## 
    ## 
    ## ## Clustering - top variables 
    ## 
    ## > ideal number of clusters: 3

<img src="r-stocks-research_files/figure-markdown_github/segmentation-5.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   4105          0.1665133        0.3567358               0.0902197             0.3275626
    ##        2    223          0.0556469        0.2268840              -0.0194400             0.2067603

<img src="r-stocks-research_files/figure-markdown_github/segmentation-6.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   3514          0.0676639        0.2435332               0.0011085             0.2230389
    ##        2    591          0.7542580        0.3575648               0.6200615             0.3487806
    ##        3    223          0.0556469        0.2268840              -0.0194400             0.2067603

<img src="r-stocks-research_files/figure-markdown_github/segmentation-7.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   2515          0.1658136        0.1964411               0.0898083             0.1815150
    ##        2    999         -0.1794299        0.1617641              -0.2221946             0.1495714
    ##        3    591          0.7542580        0.3575648               0.6200615             0.3487806
    ##        4    223          0.0556469        0.2268840              -0.0194400             0.2067603

<img src="r-stocks-research_files/figure-markdown_github/segmentation-8.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1948          0.1917690        0.1596861               0.1142411             0.1476750
    ##        2    999         -0.1794299        0.1617641              -0.2221946             0.1495714
    ##        3    591          0.7542580        0.3575648               0.6200615             0.3487806
    ##        4    223          0.0556469        0.2268840              -0.0194400             0.2067603
    ##        5    567          0.0766406        0.2709234               0.0058664             0.2494249
    ## 
    ## 
    ## ## Clustering - trend 
    ## 
    ## > ideal number of clusters: 2

<img src="r-stocks-research_files/figure-markdown_github/segmentation-9.png" width="750px" />

    ## 
    ## 
    ##  cluster      n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  -----  -----------------  ---------------  ----------------------  --------------------
    ##        1   1124          0.1052172        0.3057994               0.0686129             0.2955115
    ##        2     31          0.0684146        0.2376395               0.0281372             0.2399665

<img src="r-stocks-research_files/figure-markdown_github/segmentation-10.png" width="750px" />

    ## 
    ## 
    ##  cluster     n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  ----  -----------------  ---------------  ----------------------  --------------------
    ##        1   886          0.1117703        0.3063890               0.0758292             0.2947548
    ##        2   238          0.0808222        0.3029879               0.0417485             0.2973953
    ##        3    31          0.0684146        0.2376395               0.0281372             0.2399665

<img src="r-stocks-research_files/figure-markdown_github/segmentation-11.png" width="750px" />

    ## 
    ## 
    ##  cluster     n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  ----  -----------------  ---------------  ----------------------  --------------------
    ##        1   857          0.1139160        0.3067240               0.0790037             0.2944382
    ##        2   238          0.0808222        0.3029879               0.0417485             0.2973953
    ##        3    29          0.0483606        0.2943508              -0.0179811             0.2937058
    ##        4    31          0.0684146        0.2376395               0.0281372             0.2399665

<img src="r-stocks-research_files/figure-markdown_github/segmentation-12.png" width="750px" />

    ## 
    ## 
    ##  cluster     n   perc_change_mean   perc_change_sd   diff_above_index_mean   diff_above_index_sd
    ## --------  ----  -----------------  ---------------  ----------------------  --------------------
    ##        1   439          0.2825172        0.2855395               0.2339447             0.2837087
    ##        2   418         -0.0631556        0.2147750              -0.0837214             0.2039637
    ##        3   238          0.0808222        0.3029879               0.0417485             0.2973953
    ##        4    29          0.0483606        0.2943508              -0.0179811             0.2937058
    ##        5    31          0.0684146        0.2376395               0.0281372             0.2399665

> It will be an interesting experiment to divide the stocks up by cluster to see if machine learning algorithms predict better when focusing on clustered data. The drawback will be a reduced test/training set.

------------------------------------------------------------------------

Sandbox / TODO
==============

``` r
ggplot(data = df_stocks_full, mapping = aes(x = DividendsperShareCommonStockPrimaryIssue, y = diff_above_index_1year)) +
    geom_point(alpha=0.2)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-1.png" width="750px" />

``` r
ggplot(data = df_stocks_full, mapping = aes(x = ratios_quick_ratio, y = diff_above_index_1year)) +
    geom_point(alpha=0.2)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-2.png" width="750px" />

``` r
ggplot(data = df_stocks_full, mapping = aes(x = TotalRevenue, y = diff_above_index_1year)) +
    geom_point(alpha=0.2)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-3.png" width="750px" />

``` r
# makes sense that revenue isn't necessarily correlated with diff_above_index_1year becuase revenue doesn't guarantee success or profit

ggplot(data = df_stocks_full) +
    geom_hex(mapping = aes(x = TotalRevenue, y = diff_above_index_1year))
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-4.png" width="750px" />

``` r
ggplot(data = df_stocks_full, aes(diff_above_index_1year)) +
    geom_freqpoly(bins = 15)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-5.png" width="750px" />

``` r
# perhaps clustering data will help, since 

ggplot(data = df_stocks_full, mapping = aes(x = net_profit_margin, y = diff_above_index_1year)) +
    geom_point(alpha=0.2)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-6.png" width="750px" />

``` r
# makes sense that revenue isn't necessarily correlated with diff_above_index_1year becuase revenue doesn't guarantee success or profit

ggplot(data = df_stocks_full) +
    geom_hex(mapping = aes(x = net_profit_margin, y = diff_above_index_1year))
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-7.png" width="750px" />

``` r
ggplot(data = df_stocks_full, aes(net_profit_margin)) +
    geom_freqpoly(bins = 15)
```

<img src="r-stocks-research_files/figure-markdown_github/sandbox-8.png" width="750px" />

``` r
# interesting that net profit margin doesn't appear to have any significance in determining diff_above_index_1year. I would have expected a somewhat linear relationship
```

Datasets
========

``` r
stocks_common_size_perc_change <- df_stocks_full %>% dplyr::select(perc_change_stock_1year, dplyr::contains('cs_'))
saveRDS(stocks_common_size_perc_change, file = 'stocks_common_size_perc_change.RDS')
stocks_common_size_diff_above_index <- df_stocks_full %>% dplyr::select(diff_above_index_1year, dplyr::contains('cs_'))
saveRDS(stocks_common_size_diff_above_index, file = 'stocks_common_size_diff_above_index.RDS')

stocks_ratios_perc_change <- df_stocks_full %>% dplyr::select(perc_change_stock_1year, dplyr::contains('ratios_'), dplyr::contains('ratioh_'))
saveRDS(stocks_ratios_perc_change, file = 'stocks_ratios_perc_change.RDS')
stocks_ratios_diff_above_index <- df_stocks_full %>% dplyr::select(diff_above_index_1year, dplyr::contains('ratios_'), dplyr::contains('ratioh_'))
saveRDS(stocks_ratios_diff_above_index, file = 'stocks_ratios_diff_above_index.RDS')

stocks_top_variables_perc_change <- df_stocks_full[, c('perc_change_stock_1year', df_top_variables$variables)]
saveRDS(stocks_top_variables_perc_change, file = 'stocks_top_variables_perc_change.RDS')
stocks_top_variables_diff_above_index <- df_stocks_full[, c('diff_above_index_1year', df_top_variables$variables)]
saveRDS(stocks_top_variables_diff_above_index, file = 'stocks_top_variables_diff_above_index.RDS')

stocks_all_perc_change <- df_stocks_full %>% dplyr::select(-date, -symbol, -diff_above_index_1year)
saveRDS(stocks_all_perc_change, file = 'stocks_all_perc_change.RDS')
stocks_all_diff_above_index <- df_stocks_full %>% dplyr::select(-date, -symbol, -perc_change_stock_1year)
saveRDS(stocks_all_diff_above_index, file = 'stocks_all_diff_above_index.RDS')

stocks_trend_perc_change <- df_stocks_trend %>% dplyr::select(-date, -symbol, -diff_above_index_1year)
saveRDS(stocks_trend_perc_change, file = 'stocks_trend_perc_change.RDS')
stocks_trend_diff_above_index <- df_stocks_trend %>% dplyr::select(-date, -symbol, -perc_change_stock_1year)
saveRDS(stocks_trend_diff_above_index, file = 'stocks_trend_diff_above_index.RDS')
```
